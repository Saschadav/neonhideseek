<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Neon Hide & Seek</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <!-- Hauptmen√º -->
    <div id="mainMenu" class="menu">
        <div class="menu-container">
            <h1 class="menu-title" data-translate="title">NEON HIDE & SEEK</h1>
            <div class="menu-buttons">
                <button class="menu-btn" id="singleplayerBtn" data-translate="singleplayer">SINGLEPLAYER</button>
                <button class="menu-btn" id="multiplayerBtn" data-translate="multiplayer">MULTIPLAYER</button>
                <button class="menu-btn secondary" id="settingsBtn">‚öôÔ∏è SETTINGS</button>
            </div>
        </div>
    </div>

    <!-- Nickname Eingabe -->
    <div id="nicknameMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title" data-translate="nickname">NICKNAME</h1>
            <input type="text" id="nicknameInput" placeholder="Your Name..." data-translate="yourName" maxlength="15" class="menu-input">
            <div class="menu-buttons">
                <button class="menu-btn" id="confirmNicknameBtn" data-translate="confirm">CONFIRM</button>
                <button class="menu-btn secondary" id="backToMainBtn" data-translate="back">BACK</button>
            </div>
        </div>
    </div>

    <!-- Multiplayer Lobby -->
    <div id="lobbyMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title" data-translate="lobby">LOBBY</h1>
            <div class="menu-buttons">
                <button class="menu-btn" id="createRoomBtn" data-translate="createRoom">CREATE ROOM</button>
                <button class="menu-btn" id="joinRoomBtn" data-translate="joinRoom">JOIN ROOM</button>
                <button class="menu-btn secondary" id="backToNicknameBtn" data-translate="back">BACK</button>
            </div>
        </div>
    </div>

    <!-- Raum erstellen -->
    <div id="createRoomMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title" data-translate="createRoomTitle">CREATE ROOM</h1>
            <div class="form-group">
                <label data-translate="roomName">Room Name:</label>
                <input type="text" id="roomNameInput" placeholder="My Room" data-translate="myRoom" maxlength="20" class="menu-input">
            </div>
            <div class="form-group">
                <label data-translate="maxPlayers">Max. Players:</label>
                <div class="slider-container">
                    <input type="range" id="maxPlayersSlider" min="2" max="15" value="4" class="menu-slider">
                    <span id="maxPlayersValue">4</span>
                </div>
            </div>
            <div class="form-group">
                <label data-translate="map">Map:</label>
                <select id="mapTypeSelect" class="menu-select">
                    <option value="classic" data-translate="classic">Classic</option>
                </select>
            </div>
            <div class="form-group">
                <label data-translate="gameTime">Game Time (seconds):</label>
                <div class="slider-container">
                    <input type="range" id="gameTimeSlider" min="60" max="300" value="120" class="menu-slider">
                    <span id="gameTimeValue">120</span>
                </div>
            </div>
            <div class="form-group">
                <label data-translate="monsterSelectTime">Monster Selection Time (seconds):</label>
                <div class="slider-container">
                    <input type="range" id="monsterSelectTimeSlider" min="10" max="60" value="10" class="menu-slider">
                    <span id="monsterSelectTimeValue">10</span>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="confirmCreateRoomBtn" data-translate="create">CREATE</button>
                <button class="menu-btn secondary" id="backToLobbyBtn" data-translate="back">BACK</button>
            </div>
        </div>
    </div>

    <!-- Raum beitreten -->
    <div id="joinRoomMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title" data-translate="availableRooms">AVAILABLE ROOMS</h1>
            <div id="roomsList" class="rooms-list">
                <!-- Dynamisch gef√ºllt -->
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="refreshRoomsBtn" data-translate="refresh">REFRESH</button>
                <button class="menu-btn secondary" id="backToLobbyBtn2" data-translate="back">BACK</button>
            </div>
        </div>
    </div>

    <!-- Raum Wartebereich -->
    <div id="roomWaitingMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title" id="roomTitle" data-translate="room">ROOM</h1>
            <div id="playersList" class="players-list">
                <!-- Dynamisch gef√ºllt -->
            </div>
            <div class="room-info">
                <p><span data-translate="pressQ">Press</span> <span class="key">Q</span> <span data-translate="toChooseRole">to choose your role</span></p>
                <p class="role-hint" data-translate="roleHint">üî¥ Seeker = Hunter | ‚ö™ Survivor = Hider</p>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="startGameBtn" data-translate="startGame">START GAME</button>
                <button class="menu-btn secondary" id="leaveRoomBtn" data-translate="leaveRoom">LEAVE ROOM</button>
            </div>
        </div>
    </div>
    
    <!-- In-Game UI -->
    <div id="ui">
        <div id="timer">120</div>
        <div id="crosshair"></div>
        
        <!-- Rollenanzeige -->
        <div id="roleDisplay" class="role-display hidden">
            <div id="roleText"></div>
        </div>
        
        <!-- Countdown -->
        <div id="countdownDisplay" class="countdown-display hidden">
            <div id="countdownText"></div>
            <div id="countdownNumber"></div>
        </div>
        
        <!-- Seeker Ability (nur f√ºr Seeker) -->
        <div id="seekerAbility" class="seeker-ability hidden">
            <div class="ability-content">
                <div id="abilityIcon" class="ability-icon">üëÅÔ∏è</div>
                <div class="ability-info">
                    <div class="ability-name" data-translate="auraVision">AURA-VISION</div>
                    <div id="abilityCooldown" class="ability-cooldown" data-translate="ready">READY</div>
                </div>
            </div>
            <div class="ability-hint" data-translate="pressE">Press [E]</div>
        </div>
        
        <!-- Sprint Bar (nur f√ºr Survivor) -->
        <div id="sprintBar" class="sprint-bar">
            <div id="sprintFill" class="sprint-fill"></div>
            <span class="sprint-label" data-translate="sprint">SPRINT</span>
        </div>
        
        <div id="gameMessage">
            <div id="messageText"></div>
            <button id="restartButton" data-translate="backToRoom">Back to Room</button>
        </div>
    </div>
    
    <!-- Monster Selection Screen -->
    <div id="monsterSelectionMenu" class="menu hidden">
        <div class="menu-container monster-select-container">
            <h1 class="menu-title" data-translate="chooseMonster">CHOOSE YOUR MONSTER</h1>
            <div id="selectionTimeRemaining" class="selection-timer"><span data-translate="time">Time:</span> 30s</div>
            
            <div class="monsters-grid">
                <div class="monster-card" data-monster="shadow">
                    <div class="monster-preview">üëπ</div>
                    <div class="monster-name" data-translate="shadowHunter">Shadow Hunter</div>
                </div>
                <div class="monster-card" data-monster="phantom">
                    <div class="monster-preview">üëª</div>
                    <div class="monster-name" data-translate="phantom">Phantom</div>
                </div>
                <div class="monster-card" data-monster="demon">
                    <div class="monster-preview">üòà</div>
                    <div class="monster-name" data-translate="demonLord">Demon Lord</div>
                </div>
            </div>
            
            <div id="monsterDetails" class="monster-details hidden">
                <div class="monster-display">
                    <div id="monsterModel" class="monster-model">üëπ</div>
                </div>
                <div class="monster-info">
                    <h2 id="monsterNameDetail"></h2>
                    <p id="monsterDescription"></p>
                    <div class="monster-stats">
                        <div class="stat">
                            <span class="stat-label" data-translate="speed">Speed:</span>
                            <span id="monsterSpeed" class="stat-value"></span>
                        </div>
                        <div class="stat">
                            <span class="stat-label" data-translate="ability">Ability:</span>
                            <span id="monsterAbility" class="stat-value"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="menu-buttons">
                <button class="menu-btn" id="confirmMonsterBtn" data-translate="select">SELECT</button>
                <button class="menu-btn secondary" id="randomMonsterBtn" data-translate="random">RANDOM</button>
            </div>
        </div>
    </div>
    
    <!-- Settings Menu -->
    <div id="settingsMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title" data-translate="settings">SETTINGS</h1>
            <div class="form-group">
                <label data-translate="language">Language:</label>
                <select id="languageSelect" class="menu-select">
                    <option value="en" data-translate="english">English</option>
                    <option value="de" data-translate="german">German</option>
                </select>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="applySettingsBtn" data-translate="apply">APPLY</button>
                <button class="menu-btn secondary" id="backToMainFromSettingsBtn" data-translate="back">BACK</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <script type="module" src="js/main.js"></script>
</body>
</html>
