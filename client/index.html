<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Neon Hide & Seek</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <!-- Hauptmen√º -->
    <div id="mainMenu" class="menu">
        <div class="menu-container">
            <h1 class="menu-title">NEON HIDE & SEEK</h1>
            <div class="menu-buttons">
                <button class="menu-btn" id="singleplayerBtn">SINGLEPLAYER</button>
                <button class="menu-btn" id="multiplayerBtn">MULTIPLAYER</button>
            </div>
        </div>
    </div>

    <!-- Nickname Eingabe -->
    <div id="nicknameMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title">NICKNAME</h1>
            <input type="text" id="nicknameInput" placeholder="Dein Name..." maxlength="15" class="menu-input">
            <div class="menu-buttons">
                <button class="menu-btn" id="confirmNicknameBtn">BEST√ÑTIGEN</button>
                <button class="menu-btn secondary" id="backToMainBtn">ZUR√úCK</button>
            </div>
        </div>
    </div>

    <!-- Multiplayer Lobby -->
    <div id="lobbyMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title">LOBBY</h1>
            <div class="menu-buttons">
                <button class="menu-btn" id="createRoomBtn">RAUM ERSTELLEN</button>
                <button class="menu-btn" id="joinRoomBtn">RAUM BEITRETEN</button>
                <button class="menu-btn secondary" id="backToNicknameBtn">ZUR√úCK</button>
            </div>
        </div>
    </div>

    <!-- Raum erstellen -->
    <div id="createRoomMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title">RAUM ERSTELLEN</h1>
            <div class="form-group">
                <label>Raumname:</label>
                <input type="text" id="roomNameInput" placeholder="Mein Raum" maxlength="20" class="menu-input">
            </div>
            <div class="form-group">
                <label>Max. Spieler:</label>
                <div class="slider-container">
                    <input type="range" id="maxPlayersSlider" min="2" max="15" value="4" class="menu-slider">
                    <span id="maxPlayersValue">4</span>
                </div>
            </div>
            <div class="form-group">
                <label>Karte:</label>
                <select id="mapTypeSelect" class="menu-select">
                    <option value="classic">Classic</option>
                </select>
            </div>
            <div class="form-group">
                <label>Spielzeit (Sekunden):</label>
                <div class="slider-container">
                    <input type="range" id="gameTimeSlider" min="60" max="300" value="120" class="menu-slider">
                    <span id="gameTimeValue">120</span>
                </div>
            </div>
            <div class="form-group">
                <label>Monster-Auswahl-Zeit (Sekunden):</label>
                <div class="slider-container">
                    <input type="range" id="monsterSelectTimeSlider" min="10" max="60" value="30" class="menu-slider">
                    <span id="monsterSelectTimeValue">30</span>
                </div>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="confirmCreateRoomBtn">ERSTELLEN</button>
                <button class="menu-btn secondary" id="backToLobbyBtn">ZUR√úCK</button>
            </div>
        </div>
    </div>

    <!-- Raum beitreten -->
    <div id="joinRoomMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title">VERF√úGBARE R√ÑUME</h1>
            <div id="roomsList" class="rooms-list">
                <!-- Dynamisch gef√ºllt -->
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="refreshRoomsBtn">AKTUALISIEREN</button>
                <button class="menu-btn secondary" id="backToLobbyBtn2">ZUR√úCK</button>
            </div>
        </div>
    </div>

    <!-- Raum Wartebereich -->
    <div id="roomWaitingMenu" class="menu hidden">
        <div class="menu-container">
            <h1 class="menu-title" id="roomTitle">RAUM</h1>
            <div id="playersList" class="players-list">
                <!-- Dynamisch gef√ºllt -->
            </div>
            <div class="room-info">
                <p>Dr√ºcke <span class="key">Q</span> um deine Rolle zu w√§hlen</p>
                <p class="role-hint">üî¥ Seeker = J√§ger | ‚ö™ Survivor = Verstecker</p>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn" id="startGameBtn">SPIEL STARTEN</button>
                <button class="menu-btn secondary" id="leaveRoomBtn">RAUM VERLASSEN</button>
            </div>
        </div>
    </div>
    
    <!-- In-Game UI -->
    <div id="ui">
        <div id="timer">120</div>
        <div id="crosshair"></div>
        
        <!-- Rollenanzeige -->
        <div id="roleDisplay" class="role-display hidden">
            <div id="roleText"></div>
        </div>
        
        <!-- Countdown -->
        <div id="countdownDisplay" class="countdown-display hidden">
            <div id="countdownText"></div>
            <div id="countdownNumber"></div>
        </div>
        
        <!-- Seeker Ability (nur f√ºr Seeker) -->
        <div id="seekerAbility" class="seeker-ability hidden">
            <div class="ability-content">
                <div id="abilityIcon" class="ability-icon">üëÅÔ∏è</div>
                <div class="ability-info">
                    <div class="ability-name">AURA-VISION</div>
                    <div id="abilityCooldown" class="ability-cooldown">BEREIT</div>
                </div>
            </div>
            <div class="ability-hint">Dr√ºcke [E]</div>
        </div>
        
        <!-- Sprint Bar (nur f√ºr Survivor) -->
        <div id="sprintBar" class="sprint-bar">
            <div id="sprintFill" class="sprint-fill"></div>
            <span class="sprint-label">SPRINT</span>
        </div>
        
        <div id="gameMessage">
            <div id="messageText"></div>
            <button id="restartButton">Zur√ºck zum Raum</button>
        </div>
    </div>
    
    <!-- Monster Selection Screen -->
    <div id="monsterSelectionMenu" class="menu hidden">
        <div class="menu-container monster-select-container">
            <h1 class="menu-title">W√ÑHLE DEINEN MONSTER</h1>
            <div id="selectionTimeRemaining" class="selection-timer">Zeit: 30s</div>
            
            <div class="monsters-grid">
                <div class="monster-card" data-monster="shadow">
                    <div class="monster-preview">üëπ</div>
                    <div class="monster-name">Shadow Hunter</div>
                </div>
                <div class="monster-card" data-monster="phantom">
                    <div class="monster-preview">üëª</div>
                    <div class="monster-name">Phantom</div>
                </div>
                <div class="monster-card" data-monster="demon">
                    <div class="monster-preview">üòà</div>
                    <div class="monster-name">Demon Lord</div>
                </div>
            </div>
            
            <div id="monsterDetails" class="monster-details hidden">
                <div class="monster-display">
                    <div id="monsterModel" class="monster-model">üëπ</div>
                </div>
                <div class="monster-info">
                    <h2 id="monsterNameDetail"></h2>
                    <p id="monsterDescription"></p>
                    <div class="monster-stats">
                        <div class="stat">
                            <span class="stat-label">Geschwindigkeit:</span>
                            <span id="monsterSpeed" class="stat-value"></span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">F√§higkeit:</span>
                            <span id="monsterAbility" class="stat-value"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="menu-buttons">
                <button class="menu-btn" id="confirmMonsterBtn">AUSW√ÑHLEN</button>
                <button class="menu-btn secondary" id="randomMonsterBtn">RANDOM</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <script type="module" src="js/main.js"></script>
</body>
</html>
